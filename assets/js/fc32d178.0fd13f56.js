"use strict";(self.webpackChunkOPS705=self.webpackChunkOPS705||[]).push([[755],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return c}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(a),c=r,g=d["".concat(s,".").concat(c)]||d[c]||m[c]||i;return a?n.createElement(g,o(o({ref:t},u),{},{components:a})):n.createElement(g,o({ref:t},u))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},7725:function(e,t,a){a.r(t),a.d(t,{assets:function(){return s},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return p}});var n=a(3117),r=(a(7294),a(3905));const i={id:"lab4",title:"Azure Lab 4",sidebar_position:4,description:"Azure Lab 4 - Setting Up a Multi-VM Application Server Environment"},o="Azure Lab 4: Setting Up a Multi-VM Application Server Environment",l={unversionedId:"Labs/lab4",id:"Labs/lab4",title:"Azure Lab 4",description:"Azure Lab 4 - Setting Up a Multi-VM Application Server Environment",source:"@site/docs/Labs/lab4.md",sourceDirName:"Labs",slug:"/Labs/lab4",permalink:"/OPS705/Labs/lab4",draft:!1,editUrl:"https://github.com/Seneca-ICTOER/OPS705/tree/main/docs/Labs/lab4.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"lab4",title:"Azure Lab 4",sidebar_position:4,description:"Azure Lab 4 - Setting Up a Multi-VM Application Server Environment"},sidebar:"courseNotesSidebar",previous:{title:"Azure Lab 3",permalink:"/OPS705/Labs/lab3"},next:{title:"Assignment 1",permalink:"/OPS705/Assignments/assignment1"}},s={},p=[{value:"Lab Preparation",id:"lab-preparation",level:2},{value:"Purpose / Objectives of Lab 4",id:"purpose--objectives-of-lab-4",level:3},{value:"Minimum Requirements",id:"minimum-requirements",level:3},{value:"Investigation 1: Setting Up A Web Server on CentOS",id:"investigation-1-setting-up-a-web-server-on-centos",level:2},{value:"Part 1: Setting Up and Managing the httpd (Apache) Service",id:"part-1-setting-up-and-managing-the-httpd-apache-service",level:3},{value:"Part 2: Allowing Web Traffic",id:"part-2-allowing-web-traffic",level:3},{value:"Part 3: Editing Your Apache Website",id:"part-3-editing-your-apache-website",level:3},{value:"Investigation 2: Setting Up A Web Server on Windows Server 2019",id:"investigation-2-setting-up-a-web-server-on-windows-server-2019",level:2},{value:"Part 1: Installing and Verifying the IIS Web Server",id:"part-1-installing-and-verifying-the-iis-web-server",level:3},{value:"Part 2: Editing Your IIS Website",id:"part-2-editing-your-iis-website",level:3},{value:"Investigation 3: Routing Through Your Linux Server",id:"investigation-3-routing-through-your-linux-server",level:2},{value:"Part 1: Enabling System-Level Forwarding on Your Linux Server",id:"part-1-enabling-system-level-forwarding-on-your-linux-server",level:3},{value:"Part 2: Port Forwarding Using NAT",id:"part-2-port-forwarding-using-nat",level:3},{value:"Part 3: Adding Forwarding Firewall Rule Exceptions",id:"part-3-adding-forwarding-firewall-rule-exceptions",level:3},{value:"Lab Submission",id:"lab-submission",level:2}],u={toc:p};function m(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"azure-lab-4-setting-up-a-multi-vm-application-server-environment"},"Azure Lab 4: Setting Up a Multi-VM Application Server Environment"),(0,r.kt)("h2",{id:"lab-preparation"},"Lab Preparation"),(0,r.kt)("h3",{id:"purpose--objectives-of-lab-4"},"Purpose / Objectives of Lab 4"),(0,r.kt)("p",null,"In this lab, you will set up a basic Apache web server (including some light HTML coding) and supporting iptables firewall rules. You will also set up an IIS-based web server on your Windows Server VM, and learn how to set up port forwarding through your Linux Server VM to allow access to the IIS web server on the Internet."),(0,r.kt)("p",null,"If you encounter technical issues, please contact your professor via e-mail or in your section's Microsoft Teams group."),(0,r.kt)("h3",{id:"minimum-requirements"},"Minimum Requirements"),(0,r.kt)("p",null,"Before beginning, you must have: "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Successfully completed Lab 3."),(0,r.kt)("li",{parentName:"ol"},"Attended the Week 5 lectures."),(0,r.kt)("li",{parentName:"ol"},"Read through the Week 5 slides, and have them handy as a reference for concepts."),(0,r.kt)("li",{parentName:"ol"},"Your Azure-based Linux VM.")),(0,r.kt)("h2",{id:"investigation-1-setting-up-a-web-server-on-centos"},"Investigation 1: Setting Up A Web Server on CentOS"),(0,r.kt)("p",null,"In this investigation, you'll install the Apache web server package from a Linux repository and set up the service."),(0,r.kt)("h3",{id:"part-1-setting-up-and-managing-the-httpd-apache-service"},"Part 1: Setting Up and Managing the httpd (Apache) Service"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"From within your Linux server, install the ",(0,r.kt)("inlineCode",{parentName:"p"},"httpd")," package.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Now that the package is installed, it's time to start up the web server. Using systemd commands, start the ",(0,r.kt)("inlineCode",{parentName:"p"},"httpd")," service.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Next, confirm the service has started without any errors. (",(0,r.kt)("strong",{parentName:"p"},"Tip:")," Always check the status of a service you've just modified, whether you're starting, stopping, or restarting it.)"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Image: Apache Status",src:a(3884).Z,width:"1290",height:"624"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Finally, check the web server is serving web pages by loading a page locally: "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl localhost\n")),(0,r.kt)("p",{parentName:"li"}," If you get a bunch of HTML code, you've succeeded! (Curl doesn't render HTML code, so you see it as plain text. This is how we check the web server works without dealing with networking.)")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Remember from our lecture, there's a difference between ",(0,r.kt)("strong",{parentName:"p"},"start")," and ",(0,r.kt)("strong",{parentName:"p"},"enable"),". Ensure the web server starts up with the system ",(0,r.kt)("em",{parentName:"p"},"every")," time.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In a browser on your ",(0,r.kt)("strong",{parentName:"p"},"local computer"),", copy and paste the address for your Linux VM. It doesn't load, does it? We're not done. Move to ",(0,r.kt)("strong",{parentName:"p"},"Part 2")," to deal with the firewall."))),(0,r.kt)("h3",{id:"part-2-allowing-web-traffic"},"Part 2: Allowing Web Traffic"),(0,r.kt)("p",null,"In this section, you will follow security best practices to allow web server traffic into your VM. We'll open a firewall exception to allow requests to our web server through, so we can access our new web server from the Internet."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Before making changes, it's a good idea to review our current rules: "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -L -vn --line-numbers\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add your rule exception. Web traffic is typically served on TCP port 80, and that's what we'll use: "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -A INPUT -p tcp --dport 80 -j ACCEPT\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Confirm your new rule has been applied: "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -L -vn --line-numbers\n")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Image: Apache Status",src:a(4775).Z,width:"1682",height:"588"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Go back to your local browser, and reload the page. Does it work now?")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"If it does, congratulations! ",(0,r.kt)("strong",{parentName:"p"},"You're almost done."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Back in you SSH session, ",(0,r.kt)("strong",{parentName:"p"},"save your new rules"),"! Remember, changes you make will be erased when you shut down unless you save them."))),(0,r.kt)("h3",{id:"part-3-editing-your-apache-website"},"Part 3: Editing Your Apache Website"),(0,r.kt)("p",null,"Finally, let's modify the main page. Currently, it's displaying the default Apache splash page. Let's change that."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Navigate to: ",(0,r.kt)("inlineCode",{parentName:"p"},"/var/www/html"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"List all files in this directory. There are none; this is expected.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In this location, elevate to root privileges and open a new vim session to: ",(0,r.kt)("inlineCode",{parentName:"p"},"index.html"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Using HTML, give it a title of: ",(0,r.kt)("strong",{parentName:"p"},"OPS705 Linux Server - Fall 2023"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Using HTML, add to the body: ",(0,r.kt)("strong",{parentName:"p"},"Name: yourname"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Using HTML, add to the body as a new line: ",(0,r.kt)("strong",{parentName:"p"},"Student Username: yourstudentusername"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Here's how that basic HTML code looks like: "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},"<html>\n  <head>\n    <title>\n      OPS705 Linux Server - Fall 2023\n    </title>\n  </head>\n  <body>\n    <b>OPS705 Linux Server - Fall 2023</b>\n    <p>Name: <b>insertyourfullname</b></p>\n    <br>Username: <b>yourstudentusername</b></br>\n  </body>\n</html>\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Save and quit the vim session.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In your ",(0,r.kt)("strong",{parentName:"p"},"local")," browser, refresh the page. If your changes show up, you're done!"))),(0,r.kt)("h2",{id:"investigation-2-setting-up-a-web-server-on-windows-server-2019"},"Investigation 2: Setting Up A Web Server on Windows Server 2019"),(0,r.kt)("p",null,"Setting up an Internet Information Services web server on an Azure VM is incredibly easy, especially in contrast to the Apache setup."),(0,r.kt)("h3",{id:"part-1-installing-and-verifying-the-iis-web-server"},"Part 1: Installing and Verifying the IIS Web Server"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Spin up your Windows Server VM, and wait until it's fully started up."),(0,r.kt)("li",{parentName:"ol"},"In the Azure blade for your Windows Server VM, add and apply the ",(0,r.kt)("strong",{parentName:"li"},"Internet Information Services (IIS)")," artifact.\n",(0,r.kt)("img",{alt:"Image: Adding IIS Artifact",src:a(4260).Z,width:"1950",height:"508"})),(0,r.kt)("li",{parentName:"ol"},"When complete, open a browser inside the Windows Server VM, and navigate to ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost"),". You should see the IIS default splash page. Congratulations!")),(0,r.kt)("h3",{id:"part-2-editing-your-iis-website"},"Part 2: Editing Your IIS Website"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"First: In a new file explorer window, find the ",(0,r.kt)("em",{parentName:"li"},"View")," menu item near the top, and click ",(0,r.kt)("em",{parentName:"li"},"File name extensions"),"."),(0,r.kt)("li",{parentName:"ol"},"Next: Open ",(0,r.kt)("strong",{parentName:"li"},"Server Manager")," from the Start menu and click on the ",(0,r.kt)("strong",{parentName:"li"},"Local Server")," menu bar option."),(0,r.kt)("li",{parentName:"ol"},"Towards the top of the window, click ",(0,r.kt)("strong",{parentName:"li"},"Tools > Internet Information Services (IIS) Manager")),(0,r.kt)("li",{parentName:"ol"},"In the new window in the ",(0,r.kt)("em",{parentName:"li"},"Connections")," menu column on the left, expand the ",(0,r.kt)("strong",{parentName:"li"},"Sites")," folder and click on ",(0,r.kt)("strong",{parentName:"li"},"Default Web Site"),"."),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("em",{parentName:"li"},"Actions")," menu column on the right, click ",(0,r.kt)("strong",{parentName:"li"},"Explore"),". This will open a new folder where your IIS web pages are stored.\n",(0,r.kt)("img",{alt:"Image: IIS Explore Dialog",src:a(1896).Z,width:"1667",height:"1177"})),(0,r.kt)("li",{parentName:"ol"},"Right-click anywhere in that window, click ",(0,r.kt)("strong",{parentName:"li"},"New > Text Document"),". Name it ",(0,r.kt)("strong",{parentName:"li"},"index.html"),". Save it with double-quotes to make sure it's saved as an HTML file, not text. ",(0,r.kt)("inlineCode",{parentName:"li"},'"index.html"')),(0,r.kt)("li",{parentName:"ol"},"Open the text file, and write the same HTML code as Investigation 1, changing the title tag to: ",(0,r.kt)("strong",{parentName:"li"},"OPS705 IIS Web Server - Fall 2023"),"."),(0,r.kt)("li",{parentName:"ol"},"Refresh your browser page from ",(0,r.kt)("em",{parentName:"li"},"Part 1"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost")," You should see your new code."),(0,r.kt)("li",{parentName:"ol"},"On your ",(0,r.kt)("strong",{parentName:"li"},"local computer"),", open a browser and navigate to the URL you used to remotely connect to your Windows Server VM. Unlike the Linux Server in Lab 3, the web page you created does not appear. We still have some work to do.")),(0,r.kt)("h2",{id:"investigation-3-routing-through-your-linux-server"},"Investigation 3: Routing Through Your Linux Server"),(0,r.kt)("p",null,"In this investigation, you'll set up your Linux Server VM to forward requests to your Windows VM's IIS web server. This is an advanced topic. Reviewing the Week 5 material is highly recommended. The following investigation assumes you understand the concepts discussed in those lectures."),(0,r.kt)("h3",{id:"part-1-enabling-system-level-forwarding-on-your-linux-server"},"Part 1: Enabling System-Level Forwarding on Your Linux Server"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Remote SSH into your Linux Server VM."),(0,r.kt)("li",{parentName:"ol"},"Elevate to root."),(0,r.kt)("li",{parentName:"ol"},"Use vim to open: ",(0,r.kt)("strong",{parentName:"li"},"/etc/sysctl.conf")),(0,r.kt)("li",{parentName:"ol"},"Add the line: ",(0,r.kt)("inlineCode",{parentName:"li"},"net.ipv4.ip_forward = 1")," (Make sure it's a new line, and that it ",(0,r.kt)("strong",{parentName:"li"},"doesn't")," start with a ",(0,r.kt)("em",{parentName:"li"},"1.")," symbol.)\n",(0,r.kt)("img",{alt:"Image: Enabling IP Forwarding",src:a(9432).Z,width:"888",height:"394"})),(0,r.kt)("li",{parentName:"ol"},"Save and quit vim."),(0,r.kt)("li",{parentName:"ol"},"At the command prompt, run: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sysctl -p\n"))),(0,r.kt)("li",{parentName:"ol"},"Confirm you've properly enabled system-level forwarding with the following command:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sysctl net.ipv4.ip_forward\n"))),(0,r.kt)("li",{parentName:"ol"},"The response from the command above should say ",(0,r.kt)("strong",{parentName:"li"},"net.ipv4.ip_forward = 1"),". If not, revisit the steps in Part 2.")),(0,r.kt)("h3",{id:"part-2-port-forwarding-using-nat"},"Part 2: Port Forwarding Using NAT"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Remote into your Windows Server VM, open Command Prompt, and run",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ipconfig\n"))),(0,r.kt)("li",{parentName:"ol"},"Write down the 10.x.x.x IP address displayed."),(0,r.kt)("li",{parentName:"ol"},"Remote SSH into your Linux Server VM, and elevate to root."),(0,r.kt)("li",{parentName:"ol"},"Confirm you can access the IIS web server on your Linux VM by running:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl **IP-address-from-step-1**\n"))),(0,r.kt)("li",{parentName:"ol"},"If you see plain HTML code displayed, move to the next step."),(0,r.kt)("li",{parentName:"ol"},"We're going to be working with the NAT table. Let's look at the NAT rules listing with the following command:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -t nat -nvL --line\n"))),(0,r.kt)("li",{parentName:"ol"},"Set up a port forwarding rule so all requests to sent your Linux VM on port 8080 get forwarded to your Windows VM on port 80. Run the following:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -t nat -A PREROUTING -p tcp --dport 8080 -j DNAT --to-destination *windows-server-ip-from-step-1*:80\n"))),(0,r.kt)("li",{parentName:"ol"},"Set up NAT for all forwarded traffic:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n"))),(0,r.kt)("li",{parentName:"ol"},"Confirm your new NAT table rules with the command from Step 4.\n",(0,r.kt)("img",{alt:"Image: Confirming NAT tables with port forwarding",src:a(1474).Z,width:"1718",height:"562"})),(0,r.kt)("li",{parentName:"ol"},"Once confirmed, save your updated rules!")),(0,r.kt)("h3",{id:"part-3-adding-forwarding-firewall-rule-exceptions"},"Part 3: Adding Forwarding Firewall Rule Exceptions"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a firewall rule to allow forwarded traffic destined for TCP port 80:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -A FORWARD -p tcp --dport 80 -j ACCEPT\n"))),(0,r.kt)("li",{parentName:"ol"},"Create a firewall rule to allow forwarded traffic sent from TCP port 80:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -A FORWARD -p tcp --sport 80 -j ACCEPT\n"))),(0,r.kt)("li",{parentName:"ol"},"Confirm your new forward rules:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"iptables -nvL --line\n")),(0,r.kt)("img",{alt:"Image: Confirming port 80 forward rules",src:a(3252).Z,width:"1688",height:"656"})),(0,r.kt)("li",{parentName:"ol"},"If correct, save your rules!"),(0,r.kt)("li",{parentName:"ol"},"Watch your firewall rules and their packet counters with the following command:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"watch iptables -nvL --line\n"))),(0,r.kt)("li",{parentName:"ol"},"In a browser on your ",(0,r.kt)("strong",{parentName:"li"},"local computer"),", paste the URL for your Linux VM, adding ",(0,r.kt)("strong",{parentName:"li"},":8080")," to the end of the address, then hit Enter. (Make sure you aren't using https!)"),(0,r.kt)("li",{parentName:"ol"},"If you've done your work right, the Windows IIS web page should appear!"),(0,r.kt)("li",{parentName:"ol"},"Review the packet count from your watch command in Step 3. Notice the new forward rules are working! Keep this in mind for troubleshooting."),(0,r.kt)("li",{parentName:"ol"},"In your SSH session, use the keyboard combination ",(0,r.kt)("strong",{parentName:"li"},"Ctrl")," and ",(0,r.kt)("strong",{parentName:"li"},"c")," to halt the watch program."),(0,r.kt)("li",{parentName:"ol"},"Now that you know your new rules work, ",(0,r.kt)("strong",{parentName:"li"},"save your new rules"),"!")),(0,r.kt)("h2",{id:"lab-submission"},"Lab Submission"),(0,r.kt)("p",null,"Submit to Blackboard full-desktop screenshots (PNG/JPG) of the following:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Browser window showing the Linux Apache page (on your local computer, not displayed on your VM)."),(0,r.kt)("li",{parentName:"ol"},"Browser window showing the Windows IIS page (on your local computer, not displayed on your VM)."),(0,r.kt)("li",{parentName:"ol"},"SSH session window with your iptables rules listed."),(0,r.kt)("li",{parentName:"ol"},"SSH session window with your iptables NAT table rules listed.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Reminder:")," Make sure to fully stop your VMs when you're done!"))}m.isMDXComponent=!0},3884:function(e,t,a){t.Z=a.p+"assets/images/apache-status-7c6603d61a51040d8ad805dffc07c57f.png"},3252:function(e,t,a){t.Z=a.p+"assets/images/forward-80-d01820a35acddf3555110f1e0a121072.png"},4260:function(e,t,a){t.Z=a.p+"assets/images/iis-artifact-e38a7932d3e83dc1a678372f7599b691.png"},1896:function(e,t,a){t.Z=a.p+"assets/images/iis-explore-74fa9b3b4025af682022186b08013477.png"},9432:function(e,t,a){t.Z=a.p+"assets/images/ip-forwarding-824ba42cb64f83aebc381ba9bb54b2e0.png"},1474:function(e,t,a){t.Z=a.p+"assets/images/nat-tables-2081ad3c554a829ec4eb7f2b1bf81d10.png"},4775:function(e,t,a){t.Z=a.p+"assets/images/rule-80-80db5aad383ea0de21e2d473c34c9352.png"}}]);